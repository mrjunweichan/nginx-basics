


## Load Balancer
  
  
**Configure Load Balancer at /etc/nginx/conf.d/lb.conf**  
```nginx
cat <<EOF >/etc/nginx/conf.d/lb.conf
upstream backend_servers {
    zone backend_server_zone 64k;
    server 127.0.0.1:9001;
    server 127.0.0.1:9002;
}

server {
    listen 9000;
    autoindex on;
    
    location / {
        proxy_pass http://backend_servers/;
        
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IPÂ  $remote_addr;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
EOF
```
  
|       Version       | Algorithm             |       Directive        |
| :-----------------: | --------------------- | :--------------------: |
|         OSS         | Round Robin (Default) |                        |
|         OSS         | Least Connection      |      `least_conn`      |
|         OSS         | IP Hash               |       `ip_hash`        |
|         OSS         | Hash                  |         `hash`         |
| ![[NGINX+.png\|30]] | Random                |        `random`        |
| ![[NGINX+.png\|30]] | Least Time Last Byte  | `least_time last_byte` |
> **Least Time Last Byte** is an advanced load balancing algorithm available in NGINX Plus
> 	- NGINX Monitors response time of each backend application server
> 	- Selects the fastest backend server for serving new request coming to NGINX proxy
> Its a popular feature when there is a large difference in response time for backend servers
> e.g. When you are using different performance hardware types
  
  
---
  
## Dashboard
  
**Enable Dashboard at /etc/nginx/conf.d/dashboard.conf**
```bash
cat <<EOF >/etc/nginx/conf.d/dashboard.conf
server {
    listen    8080;
    
    location /api {
        api write=on;
        allow all;
    }
    
    location = /dashboard.html {
        root /usr/share/nginx/html;
        index       dashboard.html;
    }
}
EOF
```
  
**NGINX Dashboard URL**  
  ```txt
http://www.example.com:8080/dashboard.html 
  ```
  
